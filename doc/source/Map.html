<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='Ext-Map'>/**
</span> * @class Ext.Map
 * @alternateClassName Ext.Set
 * @extends Ext.Class
 * @implements Ext.iter.Interface
 * @mixins Ext.iter.Summable
 * @mixins Ext.iter.Filterable
 *
 * Implements a hash map.
 */
Ext.define('Ext.Map', {

<span id='Ext-Map-property-implement'>    implement: 'Ext.iter.Interface',
</span>
    alternateClassName: 'Ext.Set',

    uses: {
        summable: 'Ext.iter.Summable',
        filterable: 'Ext.iter.Filterable'
    },

<span id='Ext-Map-property-map'>    /**
</span>     * Internal data storage
     */
    map: {},

<span id='Ext-Map-property-size'>    /**
</span>     * Size of the map
     */
    size: 0,

<span id='Ext-Map-property-dataPropertyName'>    /**
</span>     * @property {String} dataPropertyName
     * Name of the data property on the local iterable class implementation
     * @readonly
     */
    dataPropertyName: 'map',

<span id='Ext-Map-cfg-keyFn'>    /**
</span>     * @cfg {Function} [keyFn=autogenerated] Key generating function
     */
    keyFn: function() {
        return Ext.id('map');
    },

<span id='Ext-Map-method-constructor'>    /**
</span>     * Constructor for the map
     * @return void
     */
    constructor: function() {

        this.addEvents(

<span id='Ext-Map-event-beforeadd'>            /**
</span>             * @event beforeadd
             * This event gets fired before an item gets added to the map
             * @param {Ext.Map} this
             * @param {Mixed} key
             * @param {Mixed} item
             */
            'beforeadd',

<span id='Ext-Map-event-add'>            /**
</span>             * @event add
             * This event gets fired when an item gets added to the map
             * @param {Ext.Map} this
             * @param {Mixed} key
             * @param {Mixed} item
             */
            'add',

<span id='Ext-Map-event-beforeremove'>            /**
</span>             * @event beforeremove
             * This event gets fired before an item gets removed from the map
             * @param {Ext.Map} this
             * @param {Mixed} key
             * @param {Mixed} item
             */
            'beforeremove',

<span id='Ext-Map-event-remove'>            /**
</span>             * @event remove
             * This event gets fired when an item gets removed from the map
             * @param {Ext.Map} this
             * @param {Mixed} key
             * @param {Mixed} item
             */
            'remove',

<span id='Ext-Map-event-beforereplace'>            /**
</span>             * @event beforereplace
             * This event gets fired before an item gets replaced in the map
             * @param {Ext.Map} this
             * @param {Mixed} key
             * @param {Mixed} item
             * @param {Mixed} oldItem
             */
            'beforereplace',

<span id='Ext-Map-event-replace'>            /**
</span>             * @event replace
             * This event gets fired when an item gets replaced in the map
             * @param {Ext.Map} this
             * @param {Mixed} key
             * @param {Mixed} item
             * @param {Mixed} oldItem
             */
            'replace',

<span id='Ext-Map-event-beforeclear'>            /**
</span>             * @event beforeclear
             * This event gets fired before the map has been cleared
             * @param {Ext.Map} this
             */
            'beforeclear',

<span id='Ext-Map-event-clear'>            /**
</span>             * @event clear
             * This event gets fired when the map has been cleared
             * @param {Ext.Map} this
             */
            'clear',

<span id='Ext-Map-event-beforetranspose'>            /**
</span>             * @event beforetranspose
             * This event gets fired before the map get's transposed
             * @param {Ext.Map} this
             */
            'beforetranspose',

<span id='Ext-Map-event-transpose'>            /**
</span>             * @event transpose
             * This event gets fired when the map has been transposed
             * @param {Ext.Map} this
             * @param {Ext.Map} transposedMap
             */
            'transpose'
        );

        this.callParent(arguments);

        // Init mixins
        this.initFilterable();

        // Clear map silently
        this.clear(true);
    },

<span id='Ext-Map-method-addAll'>    /**
</span>     * Adds a whole object with all items to the map
     * @param {Object} object Object of data
     * @param {Boolean} silent (optional) If silent, no event will be fired
     * @return {Ext.Map}
     */
    addAll: function(object, silent) {

        var me = this;

        for (var propName in object) {
            me.add(propName, object[propName], silent);
        }
        return this;
    },

<span id='Ext-Map-method-buildItem'>    /**
</span>     * Builds an item out of key and value information
     * @param {String|Object} key Key
     * @param {Mixed} value Value
     * @return {Object}
     */
    buildItem: function(key, value) {

        if (!value) {
            value = key;
            key = this.keyFn()
        }
        return {
            key: key,
            value: value
        }
    },

<span id='Ext-Map-method-add'>    /**
</span>     * Adds an item to the map
     *
     * @param {Mixed} key Key or item object (key auto-generated then)
     * @param {Mixed} item (optional) Item can be first argument too
     * @param {Boolean} silent (optional) If silent, no event will be fired
     * @return {Ext.Map}
     */
    add: function(key, item, silent) {

        var item = this.buildItem(key, item);

        if (!silent) {
            this.fireEvent('beforeadd', this, item.key, item.value);
        }
        this.size++;
        this.map[item.key] = item.value;

        if (!silent) {
            this.fireEvent('add', this, item.key, item.value);
        }
        return this;
    },

<span id='Ext-Map-method-removeAtKey'>    /**
</span>     * Removes an item from the map by key identifier
     * @param {Mixed} key Key identifier
     * @param {Boolean} silent (optional) If silent, no event will be fired
     * @return {Ext.Map}
     */
    removeAtKey: function(key, silent) {

        if (!silent) {
            this.fireEvent('beforeremove', this, key, this.map[key]);
        }
        this.size--;
        delete this.map[key];

        if (!silent) {
            this.fireEvent('remove', this, key, this.map[key]);
        }
        return this;
    },

<span id='Ext-Map-method-replace'>    /**
</span>     * Replaces a key of the map
     * @param {Mixed} key Key identifier
     * @param {Mixed} item Item value
     * @param {Boolean} silent (optional) If silent, no event will be fired
     * @return {Ext.Map}
     */
    replace: function(key, item, silent) {

        if (!silent) {
            this.fireEvent('beforereplace', this, key, item, this.map[key]);
        }
        this.map[key] = item;

        if (!silent) {
            this.fireEvent('replace', this, key, item, this.map[key]);
        }
        return this;
    },

<span id='Ext-Map-method-clear'>    /**
</span>     * Clears the whole map by reassigning the map with an empty Object
     * @param {Boolean} silent (optional) If silent, no event will be fired
     * @return {Ext.Map}
     */
    clear: function(silent) {

        if (!silent) {
            this.fireEvent('beforeclear', this);
        }
        this.map = {};
        this.size = 0;

        if (!silent) {
            this.fireEvent('clear', this);
        }
        return this;
    },

<span id='Ext-Map-method-getCount'>    /**
</span>     * Returns the map size
     * @return {Number}
     */
    getCount: function() {
        return this.size;
    },

<span id='Ext-Map-method-get'>    /**
</span>     * Returns an item for a given key
     * @param {Mixed} key Key identifier
     * @return {Mixed}
     */
    get: function(key) {
        return this.map[key];
    },

<span id='Ext-Map-method-each'>    /**
</span>     * Calls the given function for each property in the map
     * @param {Function} fn Function to call per property
     * &lt;div class=&quot;mdetail-params&quot;&gt;&lt;ul&gt;
     * &lt;li&gt;&lt;b&gt;key&lt;/b&gt; : String&lt;p class=&quot;sub-desc&quot;&gt;The key (property name)&lt;/p&gt;&lt;/li&gt;
     * &lt;li&gt;&lt;b&gt;value&lt;/b&gt; : Mixed&lt;p class=&quot;sub-desc&quot;&gt;The value (value data)&lt;/p&gt;&lt;/li&gt;
     * &lt;li&gt;&lt;b&gt;object&lt;/b&gt; : Object&lt;p class=&quot;sub-desc&quot;&gt;The map's data object&lt;/p&gt;&lt;/li&gt;
     * &lt;/ul&gt;&lt;/div&gt;
     * @param {Object} scope (optional) Callback call scope
     * @return {Ext.Map}
     */
    each: function(fn, scope) {
        Ext.Object.each(this.map, fn, scope);
        return this;
    },

<span id='Ext-Map-method-clone'>    /**
</span>     * Clones this map instance. Please note that listeners aren't cloned.
     * @return {Ext.Map}
     */
    clone: function() {

        var cloneData = Ext.clone(this.map),
            cloneMap = new Ext.Map();

        cloneMap.map = cloneData;
        cloneMap.size = this.size;
        cloneMap.keyFn = this.keyFn;

        return cloneMap;
    },

<span id='Ext-Map-method-getValues'>    /**
</span>     * Returns the values of this map as Array
     * @return {Array}
     */
    getValues: function() {

        var values = [];
        this.each(function(key, value) {
           values.push(value);
        });
        return values;
    },

<span id='Ext-Map-method-getKeys'>    /**
</span>     * Returns the keys of this map as Array
     * @return {Array}
     */
    getKeys: function() {

        var keys = [];
        this.each(function(key) {
           keys.push(key);
        });
        return keys;
    },

<span id='Ext-Map-method-contains'>    /**
</span>     * Returns true if the given item is a member of the map
     * @param {Mixed} item Item to check for
     * @return {Boolean}
     */
    contains: function(item) {

        var contains = false;
        this.each(function(key, value) {
           if (value === item) {
               contains = true;
           }
        });
        return contains;
    },

<span id='Ext-Map-method-containsKey'>    /**
</span>     * Returns true if the given key is a member of the map
     * @param {Mixed} key Key to check for
     * @return {Boolean}
     */
    containsKey: function(key) {

        var containsKey = false;
        this.each(function(itemKey) {
           if (key === itemKey) {
               containsKey = true;
           }
        });
        return containsKey;
    },

<span id='Ext-Map-method-remove'>    /**
</span>     * Removes an item from the map
     * @param {Mixed} item Item to remove
     * @param {Boolean} silent (optional) If silent, no event will be fired
     * @return {Ext.Map}
     */
    remove: function(item, silent) {

        var me = this;
        this.each(function(key, value) {
           if (item === value) {
               me.removeAtKey(key, silent);
           }
        });
        return this;
    },

<span id='Ext-Map-method-getMap'>    /**
</span>     * Returns the internal map
     * @protected
     * @return {Object}
     */
    getMap: function() {
        return this.map;
    },

<span id='Ext-Map-method-count'>    /**
</span>     * Returns the count of a map's keys
     * @return {Number}
     */
    count: function() {
        return Ext.Object.count(this.map);
    },

<span id='Ext-Map-method-isEmpty'>    /**
</span>     * Returns true if the map is empty
     * @return {Boolean}
     */
    isEmpty: function() {
        return (this.count() &gt; 0) ? true : false
    },

<span id='Ext-Map-method-toArray'>    /**
</span>     * Returns an Array out of the Map
     * @param {Boolean} [flatten=false] (optional) Indicator if a flat array without keys should be returned
     * @return {Array}
     */
    toArray: function(flatten) {
        return Ext.toArray(this.map, flatten);
    },

<span id='Ext-Map-method-toObject'>    /**
</span>     * Returns the map's data object
     * @return {Object}
     */
    toObject: function() {
        return this.map;
    },

<span id='Ext-Map-method-transpose'>    /**
</span>     * Returns a map (clone) in which all the keys and values are interchanged.
     * Note that duplicate keys are not allowed in maps. So if you transpose a map
     * and duplicate values occur, the last value wins in it's new role as key.
     * @param {Boolean} silent (optional) If silent, no event will be fired
     * @return {Ext.Map}
     */
    transpose: function(silent) {

        if (!silent) {
            this.fireEvent('beforetranspose', this);
        }

        var cloneMap = this.clone(),
            cloneMapData = cloneMap.map;
            transposedMap = {};

        // Transpose key and value
        Ext.each(cloneMapData, function(value, key) {
            transposedMap[value] = key;
        });

        cloneMap.map = transposedMap;
        cloneMap.size = Ext.Object.count(cloneMap.map);

        if (!silent) {
            this.fireEvent('transpose', this, cloneMap);
        }
        return cloneMap;
    },

<span id='Ext-Map-method-toCollection'>    /**
</span>     * Transforms the map into an Ext.Collection instance
     * @return {Ext.Collection}
     */
    toCollection: function() {

        return Ext.collection(
            Ext.Object.toArray(this.map)
        );
    }
});
<span id='Ext-method-map'>
</span>/**
 * Creates an instance of Ext.Map.
 * @param {Object} object (optional) Initial map data to be added
 * @param {Boolean} silent (optional) If silent, no event will be fired
 * @member Ext
 * @method map
 */
Ext.map = function(object, silent) {

    var m = Ext.create('Ext.Map');

    // Set map if given
    if (object) {
        m.addAll(object, silent);
    }
    return m;
};</pre>
</body>
</html>
